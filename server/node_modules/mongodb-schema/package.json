{
  "_from": "mongodb-schema",
  "_id": "mongodb-schema@8.2.3",
  "_inBundle": false,
  "_integrity": "sha512-ak1KhbbEEfJZOlPOpIjQ2I05Y/W/PUXgjzan1Da9a3fpVuOoQ3U8hp0jKdgLYKIBC9dEQHa81UhiJgldWHSSYQ==",
  "_location": "/mongodb-schema",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "mongodb-schema",
    "fetchSpec": "latest",
    "name": "mongodb-schema",
    "raw": "mongodb-schema",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/mongodb-schema/-/mongodb-schema-8.2.3.tgz",
  "_shasum": "f9250064c4ba7ad479e84ef4dd2e40c7a8120fce",
  "_shrinkwrap": null,
  "_spec": "mongodb-schema",
  "_where": "/home/bridgeit/Desktop/chatapplication/server",
  "author": {
    "email": "thomas@rueckstiess.net",
    "name": "Thomas Rueckstiess"
  },
  "bin": {
    "mongodb-schema": "bin/mongodb-schema"
  },
  "bugs": {
    "url": "https://github.com/mongodb-js/mongodb-schema/issues"
  },
  "bundleDependencies": false,
  "check": {
    "ignore": [
      "coverage/**/*"
    ]
  },
  "dependencies": {
    "async": "^1.5.2",
    "cli-table": "^0.3.1",
    "event-stream": "^4.0.1",
    "geojson-validation": "^0.1.6",
    "js-yaml": "^3.5.2",
    "lodash": "^3.8.0",
    "mongodb": "^3.1.4",
    "mongodb-collection-sample": "^4.3.0",
    "mongodb-extended-json": "^1.6.2",
    "mongodb-ns": "^2.0.0",
    "numeral": "^1.5.3",
    "progress": "^1.1.8",
    "reservoir": "^0.1.2",
    "stats-lite": "^2.0.0",
    "yargs": "^3.32.0"
  },
  "dependency-check": {
    "entries": [
      "bin/mongodb-schema",
      "index.js"
    ]
  },
  "deprecated": false,
  "description": "Infer the probabilistic schema for a MongoDB collection.",
  "devDependencies": {
    "benchmark": "^2.0.0",
    "bson": "^0.5.6",
    "coveralls": "^2.11.2",
    "debug": "^2.2.0",
    "eslint-config-mongodb-js": "^2.2.0",
    "istanbul": "^0.3.15",
    "mocha": "^3.1.2",
    "mongodb-js-precommit": "^0.2.9",
    "ms": "^0.7.1",
    "pre-commit": "^1.0.10",
    "yargs": "^3.32.0",
    "zuul": "^3.0.0"
  },
  "homepage": "http://github.com/mongodb-js/mongodb-schema",
  "keywords": [
    "mongodb",
    "schema"
  ],
  "license": "Apache-2.0",
  "name": "mongodb-schema",
  "optionalDependencies": {
    "cli-table": "^0.3.1",
    "js-yaml": "^3.5.2",
    "mongodb": "^3.1.4",
    "mongodb-collection-sample": "^4.3.0",
    "mongodb-extended-json": "^1.6.2",
    "mongodb-ns": "^2.0.0",
    "numeral": "^1.5.3",
    "stats-lite": "^2.0.0",
    "yargs": "^3.32.0"
  },
  "precommit": [
    "check"
  ],
  "readme": "# mongodb-schema [![][npm_img]][npm_url] [![][travis_img]][travis_url] [![][coverage_img]][coverage_url]\n\nInfer a probabilistic schema for a MongoDB collection.\n\n## Usage\n\n`mongodb-schema` can be used as a command line tool or programmatically in your application as a node module.\n\n### Command line\n\nTo install mongodb-schema for command line use, run `npm install -g mongodb-schema`. This will add a new\nshell script which you can run directly from the command line.\n\nThe command line tool expects a MongoDB connection URI and a namespace in the form `<database>.<collection>`.\nWithout further arguments, it will sample 100 random documents from the collection and print a schema of\nthe collection in JSON format to stdout.\n\n```\nmongodb-schema mongodb://localhost:27017 mongodb.fanclub\n```            \n\nAdditional arguments change the number of samples (`--sample`), print additional statistics about the\nschema analysis (`--stats`), switch to a different output format (`--format`), or let you suppress the\nschema output altogether (`--no-output`) if you are only interested in the schema statistics, semantic\ntype discovery (`--semantic-types`), and the ability to disable value collection (`--no-values`).\n\nFor more information, run\n\n```\nmongodb-schema --help\n```    \n\n### API\n\nThe following example demonstrates how `mongodb-schema` can be used programmatically from\nyour node application. You need to additionally install the MongoDB node driver to follow\nalong with this example.\n\nMake sure you have a `mongod` running on localhost on port 27017 (or change the example\nbelow accordingly).\n\n1. From your application folder, install the driver and `mongodb-schema` locally:\n\n   ```\n   npm install mongodb mongodb-schema\n   ```\n\n2. (optional) If you don't have any data in your MongoDB instance yet, you can create a\n`test.data` collection with this command:\n\n    ```\n    mongo --eval \"db.data.insert([{_id: 1, a: true}, {_id: 2, a: 'true'}, {_id: 3, a: 1}, {_id: 4}])\" localhost:27017/test`\n    ```\n\n3. Create a new file `parse-schema.js` and paste in the following code:\n\n    ```javascript\n    var parseSchema = require('mongodb-schema');\n    var connect = require('mongodb');\n\n    connect('mongodb://localhost:27017/test', function(err, db) {\n      if (err) return console.error(err);\n\n      // here we are passing in a cursor as the first argument. You can\n      // also pass in a stream or an array of documents directly.\n      parseSchema(db.collection('data').find(), function(err, schema) {\n        if (err) return console.error(err);\n\n        console.log(JSON.stringify(schema, null, 2));\n        db.close();\n      });\n    });\n    ```\n\n4. When we run the above with `node ./parse-schema.js`, we'll see output\n  similar to this (some fields not present here for clarity):\n\n  ```javascript\n  {\n    \"count\": 4,                   // parsed 4 documents\n    \"fields\": [                   // an array of Field objects, @see `./lib/field.js`\n      {\n        \"name\": \"_id\",\n        \"count\": 4,               // 4 documents counted with _id\n        \"type\": \"Number\",         // the type of _id is `Number`\n        \"probability\": 1,         // all documents had an _id field\n        \"has_duplicates\": false,  // therefore no duplicates\n        \"types\": [                // an array of Type objects, @see `./lib/types/`\n          {\n            \"name\": \"Number\",     // name of the type\n            \"count\": 4,           // 4 numbers counted\n            \"probability\": 1,\n            \"unique\": 4,\n            \"values\": [           // array of encountered values\n              1,\n              2,\n              3,\n              4\n            ]\n          }\n        ]\n      },\n      {\n        \"name\": \"a\",\n        \"count\": 3,               // only 3 documents with field `a` counted\n        \"probability\": 0.75,      // hence probability 0.75\n        \"type\": [                 // found these types\n          \"Boolean\",\n          \"String\",\n          \"Number\",\n          \"Undefined\"             // for convenience, we treat Undefined as its own type\n        ],\n        \"has_duplicates\": false,   // there were no duplicate values\n        \"types\": [\n          {\n            \"name\": \"Boolean\",\n            \"count\": 1,\n            \"probability\": 0.25,  // probabilities for types are calculated factoring in Undefined\n            \"unique\": 1,\n            \"values\": [\n              true\n            ]\n          },\n          {\n            \"name\": \"String\",\n            \"count\": 1,\n            \"probability\": 0.25,\n            \"unique\": 1,\n            \"values\": [\n              \"true\"\n            ]\n          },\n          {\n            \"name\": \"Number\",\n            \"count\": 1,\n            \"probability\": 0.25,\n            \"unique\": 1,\n            \"values\": [\n              1\n            ]\n          },\n          {\n            \"name\": \"Undefined\",\n            \"count\": 1,\n            \"probability\": 0.25,\n            \"unique\": 0\n          }\n        ]\n      }\n    ]\n  }\n```\n\nA high-level view of the schema tree structure is as follows:\n\n![](./docs/mongodb-schema_diagram.png)\n\n\n## BSON Types\n\n`mongodb-schema` supports all [BSON types][bson-types].\nCheckout [the tests][tests] for more usage examples.\n\n## Semantic Types\n\nAs of version 6.1.0, mongodb-schema has a new feature called \"Semantic Type Detection\". It allows to override the type identification of a value. This enables users to provide specific domain knowledge of their data, while still using\nthe underlying flexible BSON representation and nested documents and arrays.\n\nOne of the built-in semantic types is GeoJSON, which traditionally would just be detected as \"Document\" type. With the new option `semanticTypes` enabled, these sub-documents are now considered atomic values with a type \"GeoJSON\". The original BSON type name is still available under the `bsonType` field.\n\nTo enable this mode, use the `-t` or `--semantic-types` flag at the command line. When using the API, pass an option object as the second parameter with the `semanticTypes` flag set to `true`:\n\n```javascript\nparseSchema(db.collection('data').find(), {semanticTypes: true}, function(err, schema) {\n  ...\n});\n```\nThis mode is disabled by default.\n\n#### Custom Semantic Types\n\nIt is also possible to provide custom semantic type detector functions. This is useful to provide domain\nknowledge, for example to detect trees or graphs, special string encodings of data, etc.\n\nThe detector function is called with `value` and `path` (the full field path in dot notation)\nas arguments, and must return a truthy value if the data type applies to this field or value.\n\nHere is an example to detect email addresses:\n\n```javascript\n\nvar emailRegex = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n\nfunction emailDetector(value, path) {\n  return emailRegex.test(value);\n};\n\nparseSchema(db.collection('data').find(), {EmailAddress: emailDetector}, function(err, schema) {\n  ...\n});\n```\n\nThis returns a schema with the following content (only partially shown):\n\n```\n{\n  \"name\": \"email\",\n  \"path\": \"email\",\n  \"count\": 100,\n  \"types\": [\n    {\n      \"name\": \"EmailAddress\",     // custom type \"EmailAddress\" was recognized\n      \"bsonType\": \"String\",       // original BSON type available as well\n      \"path\": \"email\",\n      \"count\": 100,\n      \"values\": [\n        \"twinbutterfly28@aim.com\",\n        \"funkymoney45@comcast.net\",\n        \"beauty68@msn.com\",\n        \"veryberry8@hotmail.com\",\n\n```\n\nAs can be seen, the field name \"email\" was correctly identified as a custom type \"EmailAddress\".\n\n## Value Sampling\n\nAs of version 6.1.0, mongodb-schema supports analysing only the structure of the documents, without collection data samples. To enable this mode, use the `--no-values` flag at the command line. When using the API, pass an option object as the second parameter with the `storeValues` flag set to `false`.\n\nThis mode is enabled by default.\n\n## Schema Statistics\n\nTo compare schemas quantitatively we introduce the following measurable metrics on a schema:\n\n#### Schema Depth\nThe schema depth is defined as the maximum number of nested levels of keys in the schema. It does not matter if the subdocuments are nested directly or as elements of an array. An empty document has a depth of 0, whereas a document with some top-level keys but no nested subdocuments has a depth of 1.\n\n#### Schema Width\nThe schema width is defined as the number of individual keys, added up over all nesting levels of the schema. Array values do not count towards the schema width.\n\n#### Examples\n\n```js\n{}\n```\n\nStatistic    | Value\n:----------- | :---:\nSchema Depth | 0\nSchema Width | 0\n\n\n```js\n{\n  one: 1\n}\n```\n\nStatistic    | Value\n:----------- | :---:\nSchema Depth | 1\nSchema Width | 1\n\n\n```js\n{\n  one: [\n    \"foo\",\n    \"bar\",\n    {\n      two: {\n        three: 3\n      }\n    },\n    \"baz\"\n  ],\n  foo: \"bar\"\n}\n```\n\nStatistic    | Value\n:----------- | :---:\nSchema Depth | 3\nSchema Width | 4\n\n```js\n{\n  a: 1,\n  b: false,\n  one: {\n    c: null,\n    two: {\n      three: {\n        four: 4,\n        e: \"deepest nesting level\"\n      }\n    }\n  },\n  f: {\n    g: \"not the deepest level\"\n  }\n}\n```\n\nStatistic    | Value\n:----------- | :---:\nSchema Depth | 4\nSchema Width | 10\n\n\n```js\n// first document\n{\n  foo: [\n    {\n      bar: [1, 2, 3]\n    }\n  ]\n},\n// second document\n{\n  foo: 0\n}\n```\n\nStatistic    | Value\n:----------- | :---:\nSchema Depth | 2\nSchema Width | 2\n\n\n## Testing\n\n```\nnpm test\n```\n\n## License\n\nApache 2.0\n\n\n\n[bson-types]: http://docs.mongodb.org/manual/reference/bson-types/\n[ampersand-state]: http://ampersandjs.com/docs#ampersand-state\n[ampersand-collection]: http://ampersandjs.com/docs#ampersand-collection\n[tests]: https://github.com/mongodb-js/mongodb-schema/tree/master/test\n[schema]: https://github.com/mongodb-js/mongodb-language-model/blob/master/lib/schema.js\n[field]: https://github.com/mongodb-js/mongodb-language-model/blob/master/lib/field.js\n[type]: https://github.com/mongodb-js/mongodb-language-model/blob/master/lib/type.js\n\n[travis_img]: https://secure.travis-ci.org/mongodb-js/mongodb-schema.svg?branch=master\n[travis_url]: https://travis-ci.org/mongodb-js/mongodb-schema\n[npm_img]: https://img.shields.io/npm/v/mongodb-schema.svg\n[npm_url]: https://www.npmjs.org/package/mongodb-schema\n[coverage_img]: https://coveralls.io/repos/mongodb-js/mongodb-schema/badge.svg\n[coverage_url]: https://coveralls.io/r/mongodb-js/mongodb-schema\n[gitter_img]: https://badges.gitter.im/Join%20Chat.svg\n[gitter_url]: https://gitter.im/mongodb-js/mongodb-js\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/mongodb-js/mongodb-schema.git"
  },
  "scripts": {
    "check": "mongodb-js-precommit",
    "ci": "./node_modules/istanbul/lib/cli.js cover _mocha -- -R spec ./test/*.test.js",
    "start": "zuul --local 3001 --open -- test/*.test.js",
    "test": "mocha"
  },
  "version": "8.2.3"
}
